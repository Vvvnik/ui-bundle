:customcss: CSS/css1.css
:figure-caption!: 
//Рисунок
:table-caption: Таблица
:toc-title: Содержание
:imagesdir: ../images
:toc:
// установка url для других репозиториев
:base-url: okn-m.anc.space  

= Журнал загрузки из внешних источников

== Назначение
Назначение ПО
Сервис предназначен для отображения результатов загрузки и парсинга данных, загруженных из внешних источников.    

== Требования к ПО
Сервис должен отображать журнал загрузки данных следующими сервисами:

* xref:closure-areas.adoc[Районы закрытия];
* xref:solar-and-geomagnetic-activity.adoc[Солнечная и геомагнитная активность];
* Орбиты КА;

== Вид страницы сервиса

Вид окна страницы сервиса "Журнал загрузки из внешних источников" представлена на <<id_image-1, Рисунке {counter:figure-number}>>.

[[id_image-1]]
.Рисунок {counter:figure-number}. Вид окна страницы сервиса "Журнал загрузки из внешних источников"
image::images-download-log/image-window.png[]

== Входные данные
Для получения информации о загрузке данных используется протокол API.
Данные для отображения поступают посредством GET-запросов в соответствующие сервисы:

=== Cервис "Районы закрытия":
* https://api-closure-areas.{base-url}/swagger/index.html[NotamDownloadLog]: Журнал загрузки данных из источника NOTAM, вкладка "Faa".
* https://api-closure-areas.{base-url}/swagger/index.html[NotmarDownloadLog]: Журнал загрузки данных из источника NOTMAR, вкладка "NgiMsi";

=== Cервис "Солнечная и геомагнитная активность":
==== Данные по геомагнитной активности:
* https://api-sun-active.{base-url}/swagger/index.html[Geomagnetic45DaysDownloadLogs]: Прогнозные данные на 45 дней начиная с текущего дня, вкладка "Noaa45days";
* https://api-sun-active.{base-url}/swagger/index.html[GeomagneticForecastDownloadLogs]: Прогнозные данные за последние 30 дней (по текущий день), вкладка "GfzPotsdamForecast";
* https://api-sun-active.{base-url}/swagger/index.html[GeomagneticThreeHourDownloadLogs]: Трехчасовой прогноз(обновление каждые 3 часа) на текущий месяц, вкладка "NoaaThreeHour";
* https://api-sun-active.{base-url}/swagger/index.html[GeomagneticArchiveDownloadLogs]: Архивные данные с 1932 года до вчерашнего дня (сегодня-1), вкладка "GfzPotsdamArchive";

==== Данные по солнечным пятнам:

* https://api-sun-active.{base-url}/swagger/index.html[SunSpotsCurrentMonthDownloadLogs]: Данные за текущий месяц включая сегодняшний день, вкладка "SidcCurrentMonth";
* https://api-sun-active.{base-url}/swagger/index.html[SunSpotsForecastDownloadLogs]: Прогнозные данные начиная с прошлого года и на 19 лет вперед по месяцам, вкладка "Nasa";
* https://api-sun-active.{base-url}/swagger/index.html[SunSpotsArchiveDownloadLogs]: Архивные данные с 1818 года до последнего дня предыдущего месяца(текущий месяц не включается), вкладка "SidcArchive";

=== Cервис "Орбиты КА":

* https://api-spacecrafts-orbits.{base-url}/swagger/index.html[NasaISSOEMDownloadsLogs]: Журнал загрузки данных из источника NASA ISS, МКС, вкладка "Nasaiss";
* https://api-spacecrafts-orbits.{base-url}/swagger/index.html[PlanetLabsDownloadsLogs]: Журнал загрузки данных из источника Planet, вкладка "Planet").

Выбор сервиса осуществляется через "вкладки".

== Алгоритм работы
Для отображения информации о загрузке данных осуществляется с помощью GET-запроса с параметрами. Обращение к соответствующему сервису осуществляется выбором вкладки источника данных. 
Параметры запроса выбираются в соответствии с фильтрами. +

Фильтры запросов (выбирается на странице "Журнала загрузки"):

. По дате:
.. Начальная дата скачивания;
.. Конечная дата скачивания.
. По страницам:
.. Отображение страниц по количеству строк (Показывать по ...);
.. Начальная страница;

== Выходные данные
Выходными данными журнала загрузок является информация отображаемая на странице журнала.
Данные отображаются в виде таблицы с результатами GET-запросов к сервисам. Результаты запросов отображаются по столбам:

* Дата запроса (UTC);
* Код ответа;
* Источник;
* URL-запроса (с возможностью скопировать ссылку);
* Тип данных (MIME type);
* Статус парсинга;
* Комментарии (ошибки);
* Действия (возможность загрузить данные отдельным файлом);
* Размер данных.

Отображение данных осуществляется с возможностью их сортировки:

* по дате запроса;
* коду ответа;
* URL запроса;
* MIME-TYPE скачивания;
* статусу парсинга;
* размеру данных. 

== Страница журнала
https://front.okn-m.anc.space/download-log

